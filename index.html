<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Task Management Web Application">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>TaskMaster</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="images/icons/icon-192x192.png">
    <link rel="icon" type="image/png" href="images/icons/icon-192x192.png">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="light-mode">
    <div class="app-container">
        <!-- Sidebar (Desktop) / Bottom Navigation (Mobile) -->
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1 class="app-title" data-en="TaskMaster" data-ar="إدارة المهام">TaskMaster</h1>
                <button id="sidebar-toggle" class="sidebar-toggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            <div class="sidebar-content">
                <ul class="sidebar-menu">
                    <li class="active" data-view="all">
                        <i class="fas fa-tasks"></i>
                        <span data-en="All Tasks" data-ar="جميع المهام">All Tasks</span>
                    </li>
                    <li data-view="today">
                        <i class="fas fa-calendar-day"></i>
                        <span data-en="Today" data-ar="اليوم">Today</span>
                    </li>
                    <li data-view="upcoming">
                        <i class="fas fa-calendar-alt"></i>
                        <span data-en="Upcoming" data-ar="القادمة">Upcoming</span>
                    </li>
                    <li data-view="completed">
                        <i class="fas fa-check-circle"></i>
                        <span data-en="Completed" data-ar="المكتملة">Completed</span>
                    </li>
                </ul>
                <div class="categories-section">
                    <h3 data-en="Categories" data-ar="التصنيفات">Categories</h3>
                    <ul class="categories-list" id="categories-list">
                        <!-- Categories will be dynamically added here -->
                    </ul>
                    <button class="add-category-btn" id="add-category-btn">
                        <i class="fas fa-plus"></i>
                        <span data-en="Add Category" data-ar="إضافة تصنيف">Add Category</span>
                    </button>
                </div>
            </div>
            <div class="sidebar-footer">
                <div class="settings-section">
                    <div class="setting-item">
                        <span data-en="Theme" data-ar="المظهر">Theme</span>
                        <label class="switch">
                            <input type="checkbox" id="theme-toggle">
                            <span class="slider round">
                                <i class="fas fa-sun"></i>
                                <i class="fas fa-moon"></i>
                            </span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <span data-en="Language" data-ar="اللغة">Language</span>
                        <div class="language-toggle">
                            <button id="en-lang" class="lang-btn active">🇺🇸</button>
                            <button id="ar-lang" class="lang-btn">🇸🇦</button>
                        </div>
                    </div>
                </div>
                <div class="backup-section">
                    <button id="backup-btn" class="backup-btn">
                        <i class="fas fa-download"></i>
                        <span data-en="Backup Data" data-ar="نسخ احتياطي">Backup Data</span>
                    </button>
                    <button id="restore-btn" class="restore-btn">
                        <i class="fas fa-upload"></i>
                        <span data-en="Restore Data" data-ar="استعادة البيانات">Restore Data</span>
                    </button>
                    <div id="last-backup" class="last-backup">
                        <span data-en="Last backup:" data-ar="آخر نسخة احتياطية:">Last backup:</span>
                        <span id="last-backup-date">Never</span>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Mobile Bottom Navigation -->
        <div class="mobile-nav" id="mobile-nav">
            <div class="mobile-nav-item active" data-view="all">
                <i class="fas fa-tasks"></i>
                <span data-en="All" data-ar="الكل">All</span>
            </div>
            <div class="mobile-nav-item" data-view="today">
                <i class="fas fa-calendar-day"></i>
                <span data-en="Today" data-ar="اليوم">Today</span>
            </div>
            <div class="mobile-nav-item" data-view="add">
                <div class="add-task-circle">
                    <i class="fas fa-plus"></i>
                </div>
            </div>
            <div class="mobile-nav-item" data-view="categories">
                <i class="fas fa-tag"></i>
                <span data-en="Categories" data-ar="التصنيفات">Categories</span>
            </div>
            <div class="mobile-nav-item" data-view="settings">
                <i class="fas fa-cog"></i>
                <span data-en="Settings" data-ar="الإعدادات">Settings</span>
            </div>
        </div>

        <!-- Main Content Area -->
        <main class="main-content" id="main-content">
            <div class="content-header">
                <h2 class="view-title" id="view-title">All Tasks</h2>
                <div class="header-actions">
                    <div class="search-container">
                        <input type="text" id="search-input" placeholder="Search tasks..." data-ar-placeholder="البحث عن المهام...">
                        <i class="fas fa-search"></i>
                    </div>
                    <button id="add-task-btn" class="add-task-btn">
                        <i class="fas fa-plus"></i>
                        <span data-en="Add Task" data-ar="إضافة مهمة">Add Task</span>
                    </button>
                </div>
            </div>

            <!-- Progress Bar -->
            <div class="progress-container">
                <div class="progress-info">
                    <span data-en="Progress" data-ar="التقدم">Progress</span>
                    <span id="progress-percentage">0%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
            </div>

            <!-- Filter Options -->
            <div class="filter-options">
                <div class="filter-group">
                    <label data-en="Sort by:" data-ar="ترتيب حسب:">Sort by:</label>
                    <select id="sort-select">
                        <option value="date-asc" data-en="Date (Earliest)" data-ar="التاريخ (الأقدم)">Date (Earliest)</option>
                        <option value="date-desc" data-en="Date (Latest)" data-ar="التاريخ (الأحدث)">Date (Latest)</option>
                        <option value="priority-desc" data-en="Priority (High-Low)" data-ar="الأولوية (عالية-منخفضة)">Priority (High-Low)</option>
                        <option value="priority-asc" data-en="Priority (Low-High)" data-ar="الأولوية (منخفضة-عالية)">Priority (Low-High)</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label data-en="Filter:" data-ar="تصفية:">Filter:</label>
                    <select id="filter-select">
                        <option value="all" data-en="All" data-ar="الكل">All</option>
                        <option value="pending" data-en="Pending" data-ar="قيد الانتظار">Pending</option>
                        <option value="completed" data-en="Completed" data-ar="مكتملة">Completed</option>
                    </select>
                </div>
            </div>

            <!-- Tasks List -->
            <div class="tasks-container" id="tasks-container">
                <!-- Tasks will be dynamically added here -->
                <div class="empty-state" id="empty-state">
                    <img src="images/empty-tasks.svg" alt="No tasks" class="empty-state-img">
                    <h3 data-en="No tasks yet" data-ar="لا توجد مهام بعد">No tasks yet</h3>
                    <p data-en="Add your first task to get started" data-ar="أضف مهمتك الأولى للبدء">Add your first task to get started</p>
                    <button class="add-task-btn empty-state-btn">
                        <i class="fas fa-plus"></i>
                        <span data-en="Add Task" data-ar="إضافة مهمة">Add Task</span>
                    </button>
                </div>
            </div>

            <!-- Calendar View -->
            <div class="calendar-view" id="calendar-view">
                <div class="calendar-header">
                    <button id="prev-month" class="calendar-nav-btn">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h3 id="calendar-month-year">September 2023</h3>
                    <button id="next-month" class="calendar-nav-btn">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                <div class="calendar-weekdays">
                    <div data-en="Sun" data-ar="أحد">Sun</div>
                    <div data-en="Mon" data-ar="اثن">Mon</div>
                    <div data-en="Tue" data-ar="ثلا">Tue</div>
                    <div data-en="Wed" data-ar="أرب">Wed</div>
                    <div data-en="Thu" data-ar="خمي">Thu</div>
                    <div data-en="Fri" data-ar="جمع">Fri</div>
                    <div data-en="Sat" data-ar="سبت">Sat</div>
                </div>
                <div class="calendar-days" id="calendar-days">
                    <!-- Calendar days will be dynamically added here -->
                </div>
            </div>
        </main>
    </div>

    <!-- Add/Edit Task Modal -->
    <div class="modal" id="task-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title" data-en="Add New Task" data-ar="إضافة مهمة جديدة">Add New Task</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="task-form">
                    <div class="form-group">
                        <label for="task-title" data-en="Task Title" data-ar="عنوان المهمة">Task Title</label>
                        <input type="text" id="task-title" required>
                    </div>
                    <div class="form-group">
                        <label for="task-description" data-en="Description" data-ar="الوصف">Description</label>
                        <textarea id="task-description"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="task-category" data-en="Category" data-ar="التصنيف">Category</label>
                            <select id="task-category">
                                <!-- Categories will be dynamically added here -->
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="task-priority" data-en="Priority" data-ar="الأولوية">Priority</label>
                            <select id="task-priority">
                                <option value="low" data-en="Low" data-ar="منخفضة">Low</option>
                                <option value="medium" data-en="Medium" data-ar="متوسطة">Medium</option>
                                <option value="high" data-en="High" data-ar="عالية">High</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="task-due-date" data-en="Due Date" data-ar="تاريخ الاستحقاق">Due Date</label>
                            <input type="date" id="task-due-date">
                        </div>
                        <div class="form-group">
                            <label for="task-due-time" data-en="Due Time" data-ar="وقت الاستحقاق">Due Time</label>
                            <input type="time" id="task-due-time">
                        </div>
                    </div>
                    <div class="form-group notification-group">
                        <div class="checkbox-container">
                            <input type="checkbox" id="task-notification">
                            <label for="task-notification" data-en="Enable Notification" data-ar="تفعيل الإشعارات">Enable Notification</label>
                        </div>
                        <select id="notification-time" disabled>
                            <option value="0" data-en="At time of task" data-ar="في وقت المهمة">At time of task</option>
                            <option value="5" data-en="5 minutes before" data-ar="قبل 5 دقائق">5 minutes before</option>
                            <option value="15" data-en="15 minutes before" data-ar="قبل 15 دقيقة">15 minutes before</option>
                            <option value="30" data-en="30 minutes before" data-ar="قبل 30 دقيقة">30 minutes before</option>
                            <option value="60" data-en="1 hour before" data-ar="قبل ساعة">1 hour before</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="cancel-btn" data-en="Cancel" data-ar="إلغاء">Cancel</button>
                        <button type="submit" class="save-btn" data-en="Save Task" data-ar="حفظ المهمة">Save Task</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Category Modal -->
    <div class="modal" id="category-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-en="Add New Category" data-ar="إضافة تصنيف جديد">Add New Category</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="category-form">
                    <div class="form-group">
                        <label for="category-name" data-en="Category Name" data-ar="اسم التصنيف">Category Name</label>
                        <input type="text" id="category-name" required>
                    </div>
                    <div class="form-group">
                        <label for="category-color" data-en="Color" data-ar="اللون">Color</label>
                        <input type="color" id="category-color" value="#4CAF50">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="cancel-btn" data-en="Cancel" data-ar="إلغاء">Cancel</button>
                        <button type="submit" class="save-btn" data-en="Save Category" data-ar="حفظ التصنيف">Save Category</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Settings Modal (Mobile Only) -->
    <div class="modal" id="settings-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-en="Settings" data-ar="الإعدادات">Settings</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="settings-container">
                    <div class="setting-item">
                        <span data-en="Theme" data-ar="المظهر">Theme</span>
                        <label class="switch">
                            <input type="checkbox" id="mobile-theme-toggle">
                            <span class="slider round">
                                <i class="fas fa-sun"></i>
                                <i class="fas fa-moon"></i>
                            </span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <span data-en="Language" data-ar="اللغة">Language</span>
                        <div class="language-toggle">
                            <button id="mobile-en-lang" class="lang-btn active">🇺🇸</button>
                            <button id="mobile-ar-lang" class="lang-btn">🇸🇦</button>
                        </div>
                    </div>
                    <div class="setting-section">
                        <h4 data-en="Backup & Restore" data-ar="النسخ الاحتياطي والاستعادة">Backup & Restore</h4>
                        <div class="backup-options">
                            <button id="mobile-backup-btn" class="backup-btn">
                                <i class="fas fa-download"></i>
                                <span data-en="Backup Data" data-ar="نسخ احتياطي">Backup Data</span>
                            </button>
                            <button id="mobile-restore-btn" class="restore-btn">
                                <i class="fas fa-upload"></i>
                                <span data-en="Restore Data" data-ar="استعادة البيانات">Restore Data</span>
                            </button>
                        </div>
                        <div class="auto-backup-section">
                            <h4 data-en="Auto Backup" data-ar="النسخ الاحتياطي التلقائي">Auto Backup</h4>
                            <div class="form-group">
                                <label for="auto-backup-frequency" data-en="Frequency" data-ar="التكرار">Frequency</label>
                                <select id="auto-backup-frequency">
                                    <option value="never" data-en="Never" data-ar="أبداً">Never</option>
                                    <option value="daily" data-en="Daily" data-ar="يومياً">Daily</option>
                                    <option value="weekly" data-en="Weekly" data-ar="أسبوعياً">Weekly</option>
                                    <option value="monthly" data-en="Monthly" data-ar="شهرياً">Monthly</option>
                                </select>
                            </div>
                        </div>
                        <div id="mobile-last-backup" class="last-backup">
                            <span data-en="Last backup:" data-ar="آخر نسخة احتياطية:">Last backup:</span>
                            <span id="mobile-last-backup-date">Never</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Modal -->
    <div class="notification-modal" id="notification-modal">
        <div class="notification-content">
            <div class="notification-icon">
                <i class="fas fa-bell"></i>
            </div>
            <div class="notification-text">
                <h4 id="notification-title">Task Reminder</h4>
                <p id="notification-message">Your task is due now!</p>
            </div>
            <button id="notification-close" class="notification-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toast-container">
        <!-- Toast notifications will be dynamically added here -->
    </div>

    <!-- File Input for Restore (Hidden) -->
    <input type="file" id="restore-file-input" accept=".json" style="display: none;">

    <!-- Scripts -->
    <script src="js/app.js" type="module"></script>
    <script src="js/service-worker-registration.js"></script>
</body>
</html>